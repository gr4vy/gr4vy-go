// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package operations

import (
	"errors"
	"fmt"
	"github.com/gr4vy/gr4vy-go/internal/utils"
	"github.com/gr4vy/gr4vy-go/models/components"
)

type CaptureTransactionGlobals struct {
	MerchantAccountID *string `header:"style=simple,explode=false,name=x-gr4vy-merchant-account-id"`
}

func (c *CaptureTransactionGlobals) GetMerchantAccountID() *string {
	if c == nil {
		return nil
	}
	return c.MerchantAccountID
}

type CaptureTransactionRequest struct {
	// The ID of the transaction
	TransactionID string `pathParam:"style=simple,explode=false,name=transaction_id"`
	// The preferred resource type in the response.
	Prefer []string `header:"style=simple,explode=false,name=prefer"`
	// The ID of the merchant account to use for this request.
	MerchantAccountID *string `header:"style=simple,explode=false,name=x-gr4vy-merchant-account-id"`
	// A unique key that identifies this request. Providing this header will make this an idempotent request. We recommend using V4 UUIDs, or another random string with enough entropy to avoid collisions.
	IdempotencyKey           *string                             `header:"style=simple,explode=false,name=idempotency-key"`
	TransactionCaptureCreate components.TransactionCaptureCreate `request:"mediaType=application/json"`
}

func (c *CaptureTransactionRequest) GetTransactionID() string {
	if c == nil {
		return ""
	}
	return c.TransactionID
}

func (c *CaptureTransactionRequest) GetPrefer() []string {
	if c == nil {
		return nil
	}
	return c.Prefer
}

func (c *CaptureTransactionRequest) GetMerchantAccountID() *string {
	if c == nil {
		return nil
	}
	return c.MerchantAccountID
}

func (c *CaptureTransactionRequest) GetIdempotencyKey() *string {
	if c == nil {
		return nil
	}
	return c.IdempotencyKey
}

func (c *CaptureTransactionRequest) GetTransactionCaptureCreate() components.TransactionCaptureCreate {
	if c == nil {
		return components.TransactionCaptureCreate{}
	}
	return c.TransactionCaptureCreate
}

type Response200CaptureTransactionType string

const (
	Response200CaptureTransactionTypeTransaction        Response200CaptureTransactionType = "Transaction"
	Response200CaptureTransactionTypeTransactionCapture Response200CaptureTransactionType = "TransactionCapture"
)

// Response200CaptureTransaction - Successful Response
type Response200CaptureTransaction struct {
	Transaction        *components.Transaction        `queryParam:"inline" union:"member"`
	TransactionCapture *components.TransactionCapture `queryParam:"inline" union:"member"`

	Type Response200CaptureTransactionType
}

func CreateResponse200CaptureTransactionTransaction(transaction components.Transaction) Response200CaptureTransaction {
	typ := Response200CaptureTransactionTypeTransaction

	return Response200CaptureTransaction{
		Transaction: &transaction,
		Type:        typ,
	}
}

func CreateResponse200CaptureTransactionTransactionCapture(transactionCapture components.TransactionCapture) Response200CaptureTransaction {
	typ := Response200CaptureTransactionTypeTransactionCapture

	return Response200CaptureTransaction{
		TransactionCapture: &transactionCapture,
		Type:               typ,
	}
}

func (u *Response200CaptureTransaction) UnmarshalJSON(data []byte) error {

	var transaction components.Transaction = components.Transaction{}
	if err := utils.UnmarshalJSON(data, &transaction, "", true, nil); err == nil {
		u.Transaction = &transaction
		u.Type = Response200CaptureTransactionTypeTransaction
		return nil
	}

	var transactionCapture components.TransactionCapture = components.TransactionCapture{}
	if err := utils.UnmarshalJSON(data, &transactionCapture, "", true, nil); err == nil {
		u.TransactionCapture = &transactionCapture
		u.Type = Response200CaptureTransactionTypeTransactionCapture
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for Response200CaptureTransaction", string(data))
}

func (u Response200CaptureTransaction) MarshalJSON() ([]byte, error) {
	if u.Transaction != nil {
		return utils.MarshalJSON(u.Transaction, "", true)
	}

	if u.TransactionCapture != nil {
		return utils.MarshalJSON(u.TransactionCapture, "", true)
	}

	return nil, errors.New("could not marshal union type Response200CaptureTransaction: all fields are null")
}
